pipeline {
    agent any
	environment {
		IMAGE_TAG = "1.0"
		//get credential info from jenkins-test credential profile in Jenkins
		DOCKERHUB_CREDENTIALS = credentials('jenkins-test')
		GITHUB_REPO_NAME = "iamkhaihoang/devops16-app"
		IMAGE_NAME = "${GITHUB_REPO_NAME}:${IMAGE_TAG}"
		JENKINS_DEPLOY_MACHINE = "192.168.1.177"
        WORKING_DIR="PROJECT-JENKINS-ECR"
	}
    stages {
        stage("Build Application") {
            steps {
                sh('pwd')
                dir('PROJECT-JENKINS-ECR') {
                    sh """
                        pwd
                    """
                }
            }
        }
    }
	post {
		always {
			sh 'docker logout'
		}
	}
}
